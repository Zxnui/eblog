<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="auther" content="zxnui">
    <meta name="keywords" content="team-http team_http">
    <meta name="description" content="team-http team_http">
    <link rel="icon" href="static/images/favicon.ico"/>
    <script src="static/js/jquery-2.1.1.js"></script>
    <link href="static/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="static/css/font-awesome.css" rel="stylesheet"/>

    <link href="static/css/toastr.min.css" rel="stylesheet"/>
    <link href="static/css/jquery.gritter.css" rel="stylesheet"/>

    <link href="static/css/animate.css" rel="stylesheet"/>
    <link href="static/css/style.css" rel="stylesheet"/>

    <link href="static/editor/css/editormd.min.css" rel="stylesheet"/>
    <title>Zxnui博客</title>
</head>

<body>
<div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                <li class="nav-header">
                    <div class="dropdown profile-element">
                        <a href="/">
                            <img alt="image" class="img-circle" src="static/images/logo.gif" />
                        </a>
                    </div>
                    <div class="logo-element">
                        Zxnui
                    </div>
                </li>
            </ul>
        </div>
    </nav>
    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
            <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
                <div class="navbar-header">
                    <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="#"><i class="fa fa-bars"></i> </a>
                </div>
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <span class="m-r-sm text-muted welcome-message"></span>
                    </li>
                    <li class="dropdown">
                        <a class="dropdown-toggle count-info" data-toggle="dropdown" href="#">
                            <i class="fa fa-bell"></i>  <span class="label label-primary">3</span>
                        </a>
                    </li>
                    <li>
                        <a href="/login"><i class="fa fa-sign-out"></i> 登录</a>
                    </li>
                </ul>
            </nav>
        </div>

        <div class="wrapper wrapper-content animated fadeInRight">
            <div class="row">
                <div id="append-md">
                    <textarea style="display: none"></textarea>
                </div>
            </div>
        </div>

        <div class="footer">
            <div>
                <label>copyrght © 2017 team-http.cn. All Rights Reserved.<a target="_blank" href="http://www.miitbeian.gov.cn">苏ICP备16009936号-1</a></label>
            </div>
        </div>
    </div>
</div>

<script src="static/js/bootstrap.min.js"></script>
<script src="static/js/jquery.metisMenu.js"></script>
<script src="static/js/jquery.slimscroll.min.js"></script>

<script src="static/js/inspinia.js"></script>
<script src="static/js/pace.min.js"></script>

<script src="static/editor/editormd.min.js"></script>
<script src="static/editor/lib/marked.min.js"></script>
<script src="static/editor/lib/prettify.min.js"></script>

<script src="static/editor/lib/raphael.min.js"></script>
<script src="static/editor/lib/underscore.min.js"></script>
<script src="static/editor/lib/sequence-diagram.min.js"></script>
<script src="static/editor/lib/flowchart.min.js"></script>
<script src="static/editor/lib/jquery.flowchart.min.js"></script>

<script>
    $(function () {
        load_menu();
        $(document).on('click','.blog_click',function(){
            var fileName = $(this).text()+".md";
            var fileDir = $(this).parent().parent().siblings().text();
            $('.markdown-body').empty();
            $.get('/md/'+fileDir+'/'+fileName, function(markdown) {
                editormd.markdownToHTML("append-md", {
                    markdown        : markdown ,//+ "\r\n" + $("#append-test").text(),
                    htmlDecode      : "style,script,iframe",  // you can filter tags decode
                    emoji           : true,
                    taskList        : true,
                    tex             : true,  // 默认不解析
                    flowChart       : true,  // 默认不解析
                    sequenceDiagram : true,  // 默认不解析
                });
            });
        })
    })

    //动态加载菜单
    function load_menu(){
        var menu = '<li><a href="#"><i class="fa fa-th-large"></i><span class="nav-label">fileName</span><span class="fa arrow"></span></a>' +
                '<ul class="nav nav-second-level" id="file_name_count">' +
                '</ul> </li>';
        var item = '<li><a href="javascript:void(0);" class="blog_click">fileNameItem</a></li>';

        $.get("base.json",function (data) {
            $.each(data.file,function (index,value) {
                if(value.parentId==0){
                    var menu_item = menu;
                    menu_item = menu_item.replace('fileName',value.name);
                    menu_item = menu_item.replace('file_name_count',"file_name_"+value.id);
                    $('#side-menu').append(menu_item);
                }else{
                    var item_item = item;
                    item_item = item_item.replace('fileNameItem',value.name);
                    $('#file_name_'+value.parentId).append(item_item);
                }
            })
        })
    }
</script>

</body>

</html>